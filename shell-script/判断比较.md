# 判断
在 sh/bash 里，**如果 else 分支没有语句执行，就不要写这个 else**
```
==========if============
if condition;then
  command
fi


========if-else=========
if condition;then
  command
else
  command
fi


=====if-elif-else=======
if condition;then
  command
elif condition;then
  command
else
  command
fi
```
## 文件判断
如果下面的条件成立返回真

| 操作符 | 描述 |
| ---- | ---- |
| -e | 文件存在 |
| -a | 文件存在，这个和-e的作用一样. 它是不赞成使用的，所以它的用处不大。 |
| -f | 文件是一个普通文件(不是一个目录或是一个设备文件) |
| -s | 文件大小不为零 |
| -d | 文件是一个目录 |
| -b | 文件是一个块设备(软盘，光驱，等等。) |
| -c | 文件是一个字符设备(键盘，调制解调器，声卡，等等。) |
| -p | 文件是一个管道 |
| -h | 文件是一个符号链接 |
| -L | 文件是一个符号链接 |
| -S | 文件是一个socket |
| -t | 文件(描述符)与一个终端设备相关。|
| -r | 文件是否可读 (指运行这个测试命令的用户的读权限) |
| -w | 文件是否可写 (指运行这个测试命令的用户的读权限) |
| -x | 文件是否可执行 (指运行这个测试命令的用户的读权限) |
| -g | 文件或目录的设置-组-ID(sgid)标记被设置。 |
| -u | 文件的设置-用户-ID(suid)标志被设置 |
| -k | 粘住位设置 |
| -N | 文件最后一次读后被修改 |
| f1 -nt f2 | 文件f1比f2新 |
| f1 -ot f2 | 文件f1比f2旧 |
| f1 -ef f2 | 文件f1和f2 是相同文件的硬链接 |
| ! | "非" -- 反转上面所有测试的结果(如果没有给出条件则返回真)。|

## 比较
二元比较操作符比较两个变量或是数值。注意整数和字符串比较的分别。

**整数比较**

| 比较操作符 | 描述 | 例子 |
| ---- | ---- | ---- |
| `-eq` | 等于 | `if [ "$a" -eq "$b" ]` |
| `-ne` | 不等于 | `if [ "$a" -ne "$b" ]` | 
| `-gt` | 大于 | `if [ "$a" -gt "$b" ]` |
| `-ge` | 大于等于 | `if [ "$a" -ge "$b" ]` |
| `-lt` | 小于 | `if [ "$a" -lt "$b" ]` |
| `-le` | 小于等于 | `if [ "$a" -le "$b" ]` |
| `<` | 小于(在双括号里使用) | `(("$a" < "$b"))` |
| `<=` | 小于等于 (在双括号里使用) | `(("$a" <= "$b"))` |
| `>` | 大于 (在双括号里使用) | `(("$a" > "$b"))` |
| `>=` | 大于等于(在双括号里使用) | `(("$a" >= "$b"))` |

**字符串比较**

| 比较操作符 | 描述 | 例子 |
| ---- | ---- | ---- |
| = | 等于 | `if [ "$a" = "$b" ]` |
| == | 等于，它和=是同义词。 | `if [ "$a" == "$b" ]` |
| != | 不相等，操作符在[[ ... ]]结构里使用模式匹配. | `if [ "$a" != "$b" ]` |
| < | 小于，依照ASCII字符排列顺序，注意"<"字符在[ ] 结构里需要转义 | `if [[ "$a" < "$b" ]]` `if [ "$a" \< "$b" ]` |
| > | 大于，依照ASCII字符排列顺序，注意">"字符在[ ] 结构里需要转义. | `if [[ "$a" > "$b" ]]` `if [ "$a" \> "$b" ]`| 
| -z | 字符串为"null"，即是指字符串长度为零。 | - |
| -n | 字符串不为"null"，即长度不为零。 | - |

**混合比较**

| 比较操作符 | 描述 | 例子 |
| ---- | ---- | ---- |
| -a | 逻辑与，如果exp1和exp2都为真，则exp1 -a exp2返回真。 | `if [ "$exp1" -a "$exp2" ]` |
| -o | 逻辑或，只要exp1和exp2任何一个为真，则exp1 -o exp2 返回真。 | `if [ "$exp1" -o "$exp2" ]` |


### 案例
1.判断变量是否存在

```
通过-n判断
if [ -n "$var" ];then
   echo "var exist"
else
   echo "var not exist"
fi

其中 "" 必不可缺少
```

2.判断文件是否存在

```
if [ ! -f "/data/filename" ];then
   echo "文件不存在"
else
   echo "文件存在"
fi

or

或者:
FILE=/etc/resolv.conf
if test -f "$FILE"; then
    echo "$FILE exist"
fi


-f FILE - 判断文件是否存在
-b FILE - 如果文件存在并且是块特殊文件，则为True。
-c FILE - 如果文件存在并且是特殊字符文件，则为True。
-d FILE - 如果文件存在并且是目录，则为True。
```

3.在 Shell 中，[[ ]] 是 Shell 的内置命令，用于检测某个条件是否成立。同时，它支持正则表达式，可以使用=~来检测字符串是否符合某个正则表达式

```
if [[ $APK == *FORD-CN*.apk ]]; then
    # 测试apk是否满足这样的格式
fi
```

4.关系大小判断

```
a=10
b=20

if [ $a -eq $b ]
then
   echo "$a -eq $b : a 等于 b"
else
   echo "$a -eq $b: a 不等于 b"
fi

-eq:等于
-ne:不等于
-gt:大于
-lt:小于
-ge:大于等于
-le:小于等于
```

5.逻辑判断

```
if [[ $suffix == *.apk ]] || [[ $suffix == *.zip ]]; then
    # 后缀是apk或者zip
fi


if [[ "$local_branch" = "origin/release"* ]] || [[ "$local_branch" = "origin/internal"* ]];then
      
fi
```

6. 查找某个分支是否存在，如果存在就删除
```
  if git show-ref --verify --quiet refs/heads/$2; then
     git branch -D $2;
  fi
```
